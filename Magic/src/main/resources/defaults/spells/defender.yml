defender:
    hidden: true
    icon: diamond_axe:18
    icon_disabled: diamond_hoe:18
    icon_url: http://textures.minecraft.net/texture/744e11fddeff88dd749ae5ff8fe80f46b9f659817d43d673e4af3759d59ae0
    category: automata
    class: AnimateSpell
    worth: 4000
    effects:
        cast:
        -  class: EffectSingle
           sound: entity_endermen_scream
        -  class: EffectTrail
           particle: block_crack
    spell_parameters: "loud true transparent air,$birth,$heart"
    cast:
        "convert brush stained_glass|1 radius 3 undo 5000": 100
        "none": 1000
    death_cast:
        "defender_death destructible $birth,$heart": 100
    parameters:
        allow_max_range: false
        transparent: transparent_to_construction
        check_destructible: false
        range: 32
        cooldown: 5000
        name: Defender
        radius: 12
        yradius: 12
        birth_range: 6
        live_range: 6
        target_min_range: 0
        target_max_range: 0
        delay: 1000
        target_mode: hunt
        targets: automaton
        target_min_range: 0
        target_max_range: 128
        live_rules: 3,4,5,6,7,8,9
        birth_rules: 4,5
        move: 4
        drops:
        - sp:10
        - defenderheart
        drop_xp: 20
        restricted: restricted_animate
        message_type: good
        undo: 7000
        reflect_chance: 0.25
    costs:
        xp: 50
        sp: 20

defender_death:
    name: Defender Death
    hidden: true
    actions:
        cast:
        - class: Sphere
          actions:
           - class: ModifyBlock
    effects:
        hit:
        -  class: EffectSingle
           location: target
           target_offset: 0,0.5,0
           sound: entity_slime_death
           color: FACC2E
           firework: burst
           effectlib:
             class: HelixEffect
             iterations: 1
             radius: $radius
             particle: falling_dust
    parameters:
        brush: air
        falling: true
        radius: 2
        undo: 10000
        undo_speed: 1
        target: self
        radius: 7
        check_destructible: true